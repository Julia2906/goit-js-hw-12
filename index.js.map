{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotos = (searchedEl, currentPage) => {\n  const params = new URLSearchParams({\n    key: '48526932-1f92eeb7aeebeac44c662a956',\n    q: searchedEl,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  });\n  return axios.get(`https://pixabay.com/api/?${params}`, params);\n};\n","export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n      <a class=\"gallery-link\"  href=\"${imgInfo.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /> \n        <ul class=\"text-info\">\n          <li class=\"image-info\">\n            <h4>Likes</h4>\n            <p>${imgInfo.likes}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Views</h4>\n            <p>${imgInfo.views}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Comments</h4>\n            <p>${imgInfo.comments}</p>\n          </li>\n          <li class=\"image-info\">\n            <h4>Downloads</h4>\n            <p>${imgInfo.downloads}</p>\n        </ul>\n        </a>\n    </li>\n  `;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet imgBox = '';\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet searchedEl = '';\nlet perPage = 15;\n\nloadMoreBtn.classList.add('is-hidden');\n\nconst searchSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedEl = searchFormEl.elements[0].value.trim();\n\n    if (searchedEl === '') {\n      iziToast.error({\n        title: '',\n        message: 'Please enter your request',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n      });\n\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.add('show-loader');\n\n    const { data } = await fetchPhotos(searchedEl, page);\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n      });\n\n      galleryEl.innerHTML = '';\n\n      searchFormEl.reset();\n\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loader.classList.remove('show-loader');\n  }\n};\n\nsearchFormEl.addEventListener('submit', searchSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    const endMessage = document.querySelector('.endResults');\n    loader.classList.add('show-loader');\n\n    page += 1;\n\n    const { data } = await fetchPhotos(searchedEl, page);\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    loader.classList.remove('show-loader');\n\n    imgBox = document.querySelector('.gallery-card').getBoundingClientRect();\n    let imgHeight = imgBox.height;\n\n    window.scrollBy({\n      top: imgHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n"],"names":["fetchPhotos","searchedEl","currentPage","params","axios","createGalleryCardTemplate","imgInfo","searchFormEl","galleryEl","loadMoreBtn","imgBox","loader","lightbox","SimpleLightbox","page","perPage","searchSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","endMessage","imgHeight"],"mappings":"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"}